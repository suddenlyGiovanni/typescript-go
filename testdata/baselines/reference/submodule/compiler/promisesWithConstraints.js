//// [tests/cases/compiler/promisesWithConstraints.ts] ////

//// [promisesWithConstraints.ts]
interface Promise<T> {
    then<U>(cb: (x: T) => Promise<U>): Promise<U>;
}

interface CPromise<T extends { x: any; }> {
    then<U extends { x: any; }>(cb: (x: T) => Promise<U>): Promise<U>;
}

interface Foo { x: any; }
interface Bar { x: any; y: any; }

var a: Promise<Foo>;
declare var b: Promise<Bar>;
a = b; // ok
b = a; // ok

var a2: CPromise<Foo>;
declare var b2: CPromise<Bar>;
a2 = b2; // ok
b2 = a2; // was error


//// [promisesWithConstraints.js]
"use strict";
var a;
a = b; // ok
b = a; // ok
var a2;
a2 = b2; // ok
b2 = a2; // was error
