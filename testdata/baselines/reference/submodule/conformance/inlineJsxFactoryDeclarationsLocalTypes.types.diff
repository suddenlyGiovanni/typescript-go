--- old.inlineJsxFactoryDeclarationsLocalTypes.types
+++ new.inlineJsxFactoryDeclarationsLocalTypes.types
@@= skipped -11, +11 lines =@@
 >__domBrand : void

             props: {
->props : { children?: Element[]; }
+>props : { children?: Element[] | undefined; }

                 children?: Element[];
 >children : Element[] | undefined
@@= skipped -35, +35 lines =@@
 >__predomBrand : void

             props: {
->props : { children?: Element[]; }
+>props : { children?: Element[] | undefined; }

                 children?: Element[];
 >children : Element[] | undefined
@@= skipped -29, +29 lines =@@
 >predom : () => predom.JSX.Element

 export const MySFC = (props: {x: number, y: number, children?: predom.JSX.Element[]}) => <p>{props.x} + {props.y} = {props.x + props.y}{...this.props.children}</p>;
->MySFC : (props: { x: number; y: number; children?: predom.JSX.Element[]; }) => predom.JSX.Element
->(props: {x: number, y: number, children?: predom.JSX.Element[]}) => <p>{props.x} + {props.y} = {props.x + props.y}{...this.props.children}</p> : (props: { x: number; y: number; children?: predom.JSX.Element[]; }) => predom.JSX.Element
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>MySFC : (props: { x: number; y: number; children?: predom.JSX.Element[] | undefined; }) => predom.JSX.Element
+>(props: {x: number, y: number, children?: predom.JSX.Element[]}) => <p>{props.x} + {props.y} = {props.x + props.y}{...this.props.children}</p> : (props: { x: number; y: number; children?: predom.JSX.Element[] | undefined; }) => predom.JSX.Element
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >x : number
 >y : number
 >children : predom.JSX.Element[] | undefined
@@= skipped -11, +11 lines =@@
 ><p>{props.x} + {props.y} = {props.x + props.y}{...this.props.children}</p> : predom.JSX.Element
 >p : any
 >props.x : number
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >x : number
 >props.y : number
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >y : number
 >props.x + props.y : number
 >props.x : number
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >x : number
 >props.y : number
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >y : number
 >this.props.children : any
 >this.props : any
@@= skipped -29, +29 lines =@@
 >__predomBrand : void

     constructor(public props: {x: number, y: number, children?: predom.JSX.Element[]}) {}
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >x : number
 >y : number
 >children : predom.JSX.Element[] | undefined
@@= skipped -16, +16 lines =@@

             {this.props.x} + {this.props.y} = {this.props.x + this.props.y}
 >this.props.x : number
->this.props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >x : number
 >this.props.y : number
->this.props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >y : number
 >this.props.x + this.props.y : number
 >this.props.x : number
->this.props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >x : number
 >this.props.y : number
->this.props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >y : number

             {...this.props.children}
 >this.props.children : predom.JSX.Element[] | undefined
->this.props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: predom.JSX.Element[]; }
+>props : { x: number; y: number; children?: predom.JSX.Element[] | undefined; }
 >children : predom.JSX.Element[] | undefined

         </p>;
@@= skipped -35, +35 lines =@@
 export const tree = <MySFC x={1} y={2}><MyClass x={3} y={4} /><MyClass x={5} y={6} /></MySFC>
 >tree : predom.JSX.Element
 ><MySFC x={1} y={2}><MyClass x={3} y={4} /><MyClass x={5} y={6} /></MySFC> : predom.JSX.Element
->MySFC : (props: { x: number; y: number; children?: predom.JSX.Element[]; }) => predom.JSX.Element
+>MySFC : (props: { x: number; y: number; children?: predom.JSX.Element[] | undefined; }) => predom.JSX.Element
 >x : number
 >1 : 1
 >y : number
@@= skipped -17, +17 lines =@@
 >5 : 5
 >y : number
 >6 : 6
->MySFC : (props: { x: number; y: number; children?: predom.JSX.Element[]; }) => predom.JSX.Element
+>MySFC : (props: { x: number; y: number; children?: predom.JSX.Element[] | undefined; }) => predom.JSX.Element

 export default <h></h>
 ><h></h> : predom.JSX.Element
@@= skipped -13, +13 lines =@@
 >dom : () => dom.JSX.Element

 import prerendered, {MySFC, MyClass, tree} from "./component";
->prerendered : import("./renderer2").predom.JSX.Element
->MySFC : (props: { x: number; y: number; children?: import("./renderer2").predom.JSX.Element[]; }) => import("./renderer2").predom.JSX.Element
+>prerendered : import("renderer2").predom.JSX.Element
+>MySFC : (props: { x: number; y: number; children?: import("renderer2").predom.JSX.Element[] | undefined; }) => import("renderer2").predom.JSX.Element
 >MyClass : typeof MyClass
->tree : import("./renderer2").predom.JSX.Element
+>tree : import("renderer2").predom.JSX.Element

 let elem = prerendered;
->elem : import("./renderer2").predom.JSX.Element
->prerendered : import("./renderer2").predom.JSX.Element
+>elem : import("renderer2").predom.JSX.Element
+>prerendered : import("renderer2").predom.JSX.Element

 elem = <h></h>; // Expect assignability error here
 >elem = <h></h> : dom.JSX.Element
->elem : import("./renderer2").predom.JSX.Element
+>elem : import("renderer2").predom.JSX.Element
 ><h></h> : dom.JSX.Element
 >h : any
 >h : any

 const DOMSFC = (props: {x: number, y: number, children?: dom.JSX.Element[]}) => <p>{props.x} + {props.y} = {props.x + props.y}{props.children}</p>;
->DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[]; }) => dom.JSX.Element
->(props: {x: number, y: number, children?: dom.JSX.Element[]}) => <p>{props.x} + {props.y} = {props.x + props.y}{props.children}</p> : (props: { x: number; y: number; children?: dom.JSX.Element[]; }) => dom.JSX.Element
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[] | undefined; }) => dom.JSX.Element
+>(props: {x: number, y: number, children?: dom.JSX.Element[]}) => <p>{props.x} + {props.y} = {props.x + props.y}{props.children}</p> : (props: { x: number; y: number; children?: dom.JSX.Element[] | undefined; }) => dom.JSX.Element
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >x : number
 >y : number
 >children : dom.JSX.Element[] | undefined
@@= skipped -28, +28 lines =@@
 ><p>{props.x} + {props.y} = {props.x + props.y}{props.children}</p> : dom.JSX.Element
 >p : any
 >props.x : number
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >x : number
 >props.y : number
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >y : number
 >props.x + props.y : number
 >props.x : number
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >x : number
 >props.y : number
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >y : number
 >props.children : dom.JSX.Element[] | undefined
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >children : dom.JSX.Element[] | undefined
 >p : any

@@= skipped -27, +27 lines =@@
 >__domBrand : void

     constructor(public props: {x: number, y: number, children?: dom.JSX.Element[]}) {}
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >x : number
 >y : number
 >children : dom.JSX.Element[] | undefined
@@= skipped -14, +14 lines =@@
 ><p>{this.props.x} + {this.props.y} = {this.props.x + this.props.y}{...this.props.children}</p> : dom.JSX.Element
 >p : any
 >this.props.x : number
->this.props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >x : number
 >this.props.y : number
->this.props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >y : number
 >this.props.x + this.props.y : number
 >this.props.x : number
->this.props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >x : number
 >this.props.y : number
->this.props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >y : number
 >this.props.children : dom.JSX.Element[] | undefined
->this.props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>this.props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >this : this
->props : { x: number; y: number; children?: dom.JSX.Element[]; }
+>props : { x: number; y: number; children?: dom.JSX.Element[] | undefined; }
 >children : dom.JSX.Element[] | undefined
 >p : any
     }
@@= skipped -33, +33 lines =@@
 const _tree = <DOMSFC x={1} y={2}><DOMClass x={3} y={4} /><DOMClass x={5} y={6} /></DOMSFC>
 >_tree : dom.JSX.Element
 ><DOMSFC x={1} y={2}><DOMClass x={3} y={4} /><DOMClass x={5} y={6} /></DOMSFC> : dom.JSX.Element
->DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[]; }) => dom.JSX.Element
+>DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[] | undefined; }) => dom.JSX.Element
 >x : number
 >1 : 1
 >y : number
@@= skipped -17, +17 lines =@@
 >5 : 5
 >y : number
 >6 : 6
->DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[]; }) => dom.JSX.Element
+>DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[] | undefined; }) => dom.JSX.Element

 // Should fail, no dom elements
 const _brokenTree = <MySFC x={1} y={2}><MyClass x={3} y={4} /><MyClass x={5} y={6} /></MySFC>
 >_brokenTree : dom.JSX.Element
 ><MySFC x={1} y={2}><MyClass x={3} y={4} /><MyClass x={5} y={6} /></MySFC> : dom.JSX.Element
->MySFC : (props: { x: number; y: number; children?: import("./renderer2").predom.JSX.Element[]; }) => import("./renderer2").predom.JSX.Element
+>MySFC : (props: { x: number; y: number; children?: import("renderer2").predom.JSX.Element[] | undefined; }) => import("renderer2").predom.JSX.Element
 >x : number
 >1 : 1
 >y : number
@@= skipped -23, +23 lines =@@
 >5 : 5
 >y : number
 >6 : 6
->MySFC : (props: { x: number; y: number; children?: import("./renderer2").predom.JSX.Element[]; }) => import("./renderer2").predom.JSX.Element
+>MySFC : (props: { x: number; y: number; children?: import("renderer2").predom.JSX.Element[] | undefined; }) => import("renderer2").predom.JSX.Element

 // Should fail, nondom isn't allowed as children of dom
 const _brokenTree2 = <DOMSFC x={1} y={2}>{tree}{tree}</DOMSFC>
 >_brokenTree2 : dom.JSX.Element
 ><DOMSFC x={1} y={2}>{tree}{tree}</DOMSFC> : dom.JSX.Element
->DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[]; }) => dom.JSX.Element
+>DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[] | undefined; }) => dom.JSX.Element
 >x : number
 >1 : 1
 >y : number
 >2 : 2
->tree : import("./renderer2").predom.JSX.Element
->tree : import("./renderer2").predom.JSX.Element
->DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[]; }) => dom.JSX.Element
+>tree : import("renderer2").predom.JSX.Element
+>tree : import("renderer2").predom.JSX.Element
+>DOMSFC : (props: { x: number; y: number; children?: dom.JSX.Element[] | undefined; }) => dom.JSX.Element
